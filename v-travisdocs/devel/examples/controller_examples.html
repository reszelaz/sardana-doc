

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Controller examples &mdash; sardana 2.4.1-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="sardana 2.4.1-alpha documentation" href="../../index.html"/>
        <link rel="up" title="Examples" href="examples.html"/>
        <link rel="next" title="Sardana development guidelines" href="../guide_coding.html"/>
        <link rel="prev" title="Macro input examples" href="macro_input_examples.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> sardana
          

          
            
            <img src="../../_static/logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../docs.html">Sardana 2.4 Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../users/index.html">User&#8217;s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Developer&#8217;s Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_macros/index.html">Writing macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_controllers/index.html">Writing controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_recorders.html">Writing recorders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_test/index.html">Sardana Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/api_sardana.html">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_migration.html">Migration guide</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="macro_examples.html">Macro examples</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Controller examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide_coding.html">Development guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sep/index.html">Sardana Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../todo.html">To do</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../revision.html">History of changes</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">sardana</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../docs.html">Sardana 2.4 Documentation</a> &raquo;</li>
      
          <li><a href="../index.html">Developer&#8217;s Guide</a> &raquo;</li>
      
          <li><a href="examples.html">Examples</a> &raquo;</li>
      
    <li>Controller examples</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/devel/examples/controller_examples.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="controller-examples">
<span id="sardana-devel-controller-examples"></span><h1>Controller examples<a class="headerlink" href="#controller-examples" title="Permalink to this headline">Â¶</a></h1>
<p>This code let you create a basic template of a controller.</p>
<p>(<a class="reference download internal" href="../../_downloads/ControllerTemplate.py" download=""><code class="xref download docutils literal"><span class="pre">Source</span> <span class="pre">code</span></code></a>)</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">ControllerTemplate.py: Create a basic controller&#39;s template.</span>
<span class="sd">Its parameters are  the file name plus .py,</span>
<span class="sd">    the class inherited if it had (optional)</span>
<span class="sd">    and &quot;yes&quot; if you want to use the obsolete convention.</span>
<span class="sd">The necessary &quot;defs&quot; are marked as #TODO</span>

<span class="sd">python ControllerTemplate.py ExampleClass.py InheritedClass NoCT</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Carlos Falcon - cfalcon@cells.es&quot;</span>


<span class="k">class</span> <span class="nc">ControllerTemplate</span><span class="p">():</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">f</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">e</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">=</span> <span class="s1">&#39;ind&#39;</span>
    <span class="c1">#    pass</span>

    <span class="k">def</span> <span class="nf">addHead</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;##############################################################################</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## This file is part of Sardana</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## http://www.sardana-controls.org/</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## Copyright 2011 CELLS / ALBA Synchrotron, Bellaterra, Spain</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## Sardana is free software: you can redistribute it and/or modify</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## it under the terms of the GNU Lesser General Public License as published by</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## the Free Software Foundation, either version 3 of the License, or</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## (at your option) any later version.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## Sardana is distributed in the hope that it will be useful,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## but WITHOUT ANY WARRANTY; without even the implied warranty of</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## GNU Lesser General Public License for more details.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## You should have received a copy of the GNU Lesser General Public License</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;## along with Sardana.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##</span><span class="se">\\</span><span class="s1">n&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;##############################################################################</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>\


    <span class="k">def</span> <span class="nf">addIncludes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inherit</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;from sardana import State</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">inherit</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;from sardana.pool.controller import &quot;</span> <span class="o">+</span> <span class="n">inherit</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">inherit</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Motor&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">=</span> <span class="s1">&#39;axis&#39;</span>
        <span class="k">if</span> <span class="n">others</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">others</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;#ADD others includes</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="c1"># f.close()</span>

    <span class="k">def</span> <span class="nf">createBasicClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;#TODO - Delete it if you don&#39;t need</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="s1">&#39;class BasicClass():</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">pass</span><span class="se">\n\n</span><span class="s1">&#39;</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">createMainClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inherit</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;class &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="n">inherit</span> <span class="o">+</span> <span class="s2">&quot;):</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&quot;&quot;&quot;Description&quot;&quot;&quot; #TODO</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">gender = &quot;Simulation&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">model  = &quot;Basic&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">organization = &quot;CELLS - ALBA&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">image = &quot;IMAGE.png&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">logo = &quot;ALBA_logo.png&quot;</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">#TODO - Delete it if you don</span><span class="se">\&#39;</span><span class="s1">t need</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">ctrl_properties= { </span><span class="se">\&#39;</span><span class="s1">AAA</span><span class="se">\&#39;</span><span class="s1"> : { </span><span class="se">\&#39;</span><span class="s1">Type</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">DevString</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">Description</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">AAA</span><span class="se">\&#39;</span><span class="s1"> } }</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">axis_attributes = { </span><span class="se">\&#39;</span><span class="s1">AAA</span><span class="se">\&#39;</span><span class="s1"> : { </span><span class="se">\&#39;</span><span class="s1">type</span><span class="se">\&#39;</span><span class="s1"> : str, </span><span class="se">\&#39;</span><span class="s1">Description</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">AAA</span><span class="se">\&#39;</span><span class="s1"> }}</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">MaxDevice = 1024 #TODO Standar value</span><span class="se">\n\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# Init()</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def __init__(self, inst, props, *args, **kwargs):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">inherit</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">inherit</span> <span class="o">+</span> \
                <span class="s1">&#39;.__init__(self, inst, props, *args, **kwargs)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">fun</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# AddDevice/DelDevice()</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def AddDevice(self,&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def DeleteDevice(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">fun</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# State()</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def PreStateOne&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> \
            <span class="s1">&#39;(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def StateOne(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">state = State.On</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">status = &quot;Undefined&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">inherit</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Motor&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">switchstate = 0&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">return state, status, switchstate&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">return state, status</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def PreStateAll&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="s1">&#39;(self):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def StateAll&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="s1">&#39;(self):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">fun</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# Read()</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def PreReadOne&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> \
            <span class="s1">&#39;(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def ReadOne(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def PreReadAll&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="s1">&#39;(self):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def ReadAll&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="s1">&#39;(self):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">fun</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# Start/Stop()</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def PreStartOne&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">if</span> <span class="n">inherit</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Motor&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;, pos):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def StartOne&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> \
            <span class="s1">&#39;(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;, pos):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def AbortOne(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def StopOne(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">self.AbortOne(&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def PreStartAll&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="s1">&#39;(self):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def StartAll&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="s1">&#39;(self):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def AbortAll(self):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">pass</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">fun</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# SetAxisPar/GetAxisPar()</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def SetAxisPar(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;, name, value):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO - Delete it if you don</span><span class="se">\&#39;</span><span class="s1">t need</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def GetAxisPar(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;, name):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO - Delete it if you don</span><span class="se">\&#39;</span><span class="s1">t need</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">fun</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# SetAxisExtraPar/GetAxisExtraPar()</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;# --------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>\
            <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def SetAxisExtraPar(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;, name, value):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO - Delete it if you don</span><span class="se">\&#39;</span><span class="s1">t need</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">def GetAxisExtraPar(self, &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">+</span> <span class="s1">&#39;, name):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="n">fun</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">#TODO - Delete it if you don</span><span class="se">\&#39;</span><span class="s1">t need - </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="n">fun</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Add MACRO_PATH</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">inherit</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span> <span class="s2">&quot;Creating &quot;</span> <span class="o">+</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">inherit</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">):</span>
            <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;CT&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">ControllerTemplate</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">addHead</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">addIncludes</span><span class="p">(</span><span class="n">inherit</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">createBasicClass</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">createMainClass</span><span class="p">(</span><span class="n">inherit</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;Please introduce filename&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../guide_coding.html" class="btn btn-neutral float-right" title="Sardana development guidelines" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="macro_input_examples.html" class="btn btn-neutral" title="Macro input examples" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.4.1-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>